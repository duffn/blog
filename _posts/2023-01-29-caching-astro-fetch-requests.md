---
title: "Caching Astro fetch Requests"
date: 2023-01-29T00:00:00+00:00
author: duffn
layout: post
permalink: /caching-astro-fetch-requests/
description: "eleventy-fetch isn't just a plugin for 11ty."
categories: ssg
tags: [astro, eleventy, 11ty, ssg, static site generator]
---

# Introduction

Caching `fetch` requests, particularly when developing locally, is a nice addition to your workflow when you're working on your remote data-powered, [Astro](https://astro.build/) static site.

One of the packages that I've used in the past with [Eleventy](https://www.11ty.dev/), another great SSG, is [`eleventy-fetch`](https://github.com/11ty/eleventy-fetch).

`eleventy-fetch` is a simple package that caches `fetch` requests based upon a few configuration options. And while the package calls itself a "a plugin for the Eleventy static site generator", there's no reason that it can't be used with other frameworks!

# Usage

- After you've [created your Astro site](https://docs.astro.build/en/install/auto/), add `eleventy-fetch` as a dependency.

```
npm i @11ty/eleventy-fetch
```

- Declare the package as a module in the `env.d.ts` file generated by Astro, since `eleventy-fetch` is not written in TypeScript by adding the line below to the end of the file.

```typescript
declare module "@11ty/eleventy-fetch";
```

- Now, just use `eleventy-fetch` wherever you'd normally use `fetch`! The below will cache the responses on disk in a `.cache` directory for 1 hour. You'll see the `.cache` directory populate with some files that hold the responses to your API requests.

```typescript
import EleventyFetch from "@11ty/eleventy-fetch";

const results: any = await EleventyFetch(`https://example.com/api`, {
  duration: "1h",
  type: "json",
});
```

![cache directory](/assets/images/2023-01-29-caching-astro-fetch-requests/cache-directory.png)

- As [the docs note](https://www.11ty.dev/docs/plugins/fetch/#cache-directory), ensure that you add the `.cache` directory to your `.gitignore`!

# Conclusion

Sorry if you were looking for some complex method to cache requests with Astro, but I'm going to tell you that if you're looking to cache your requests to avoid hitting that API too frequently when developing locally, just use `eleventy-fetch`. Yes, even with Astro! It'll save you some time and headache.
